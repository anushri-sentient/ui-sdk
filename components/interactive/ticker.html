<!-- Live Ticker / Loglines -->
<div class="demo-section">
    <h2 class="demo-title">31. Live Ticker</h2>
    <ui-ticker 
        lines='["Planning response…","Fetching sources…","Drafting outline…","Streaming answer…"]'
        follow="true" maxItems="50">
    </ui-ticker>

    <style>
    ui-ticker { display:block; border:1px solid var(--surface-3); border-radius: var(--radius-size); background: var(--surface-1); max-height: 280px; overflow:auto; }
    ui-ticker .line { padding: 8px 12px; border-bottom: 1px solid var(--surface-3); font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: .9rem; }
    ui-ticker .line:last-child { border-bottom: none; }
    </style>

    <script>
    function initTickers(){
        document.querySelectorAll('ui-ticker').forEach(root => {
            const lines = safeParseJSON(root.getAttribute('lines')) || [];
            const follow = root.getAttribute('follow') === 'true';
            const maxItems = parseInt(root.getAttribute('maxItems')||'100',10);
            let html = lines.map(l=>`<div class="line">${escapeHtml(l)}</div>`).join('');
            root.innerHTML = html;
            if(follow) root.scrollTop = root.scrollHeight;
            // Expose simple API for streaming
            root.appendLine = function(line){
                const el = document.createElement('div');
                el.className = 'line';
                el.textContent = line;
                root.appendChild(el);
                while(root.children.length > maxItems){ root.removeChild(root.firstElementChild); }
                if(follow) root.scrollTop = root.scrollHeight;
            }
        });
    }
    function safeParseJSON(str){ try { return JSON.parse(str); } catch { return null; } }
    function escapeHtml(text){ const div=document.createElement('div'); div.textContent=text||''; return div.innerHTML; }
    document.addEventListener('DOMContentLoaded', initTickers);
    </script>
</div>


