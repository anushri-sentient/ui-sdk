<!-- Streaming Timeline / Steps -->
<div class="demo-section">
    <h2 class="demo-title">24. Streaming Timeline</h2>
    <ui-timeline id="demo-timeline"
        items='[{"title":"Ingest question","detail":"Parse intent and constraints","status":"done"},{"title":"Plan","detail":"Generate outline and tools","status":"current"},{"title":"Answer","detail":"Stream markdown","status":"pending"}]'
        current="1">
    </ui-timeline>

    <style>
    ui-timeline { display:block; }
    ui-timeline .tl { position:relative; }
    ui-timeline .row { display:grid; grid-template-columns: 24px 1fr; gap: var(--size-3); align-items:flex-start; }
    ui-timeline .dot { width:14px; height:14px; border-radius:50%; background: var(--surface-3); outline: 4px solid var(--surface-2); margin-top: 4px; }
    ui-timeline .dot.done { background: var(--color-success); }
    ui-timeline .dot.current { background: var(--color-primary); animation: tl-pulse 1.2s infinite; }
    ui-timeline .dot.pending { background: var(--surface-4); }
    ui-timeline .line { position:absolute; left: 10px; top: 12px; bottom: 12px; width:2px; background: var(--surface-3); }
    ui-timeline .content { padding-bottom: var(--size-3); }
    ui-timeline .title { font-weight: 600; color: var(--text-1); }
    ui-timeline .detail { color: var(--text-2); font-size: .95rem; }
    @keyframes tl-pulse { 0%{ box-shadow:0 0 0 0 rgba(0,0,0,0.1);} 70%{ box-shadow:0 0 0 8px rgba(0,0,0,0);} 100%{ box-shadow:0 0 0 0 rgba(0,0,0,0);} }
    </style>

    <script>
    function initTimelines(){
        document.querySelectorAll('ui-timeline').forEach(root => {
            const items = safeParseJSON(root.getAttribute('items')) || [];
            const current = parseInt(root.getAttribute('current')||'-1',10);
            let html = '<div class="tl">\n<div class="line"></div>';
            items.forEach((it, idx) => {
                const status = it.status || (idx < current ? 'done' : idx === current ? 'current' : 'pending');
                html += `<div class="row"><div class="dot ${status}"></div><div class="content"><div class="title">${escapeHtml(it.title||'')}</div><div class="detail">${escapeHtml(it.detail||'')}</div></div></div>`;
            });
            html += '</div>';
            root.innerHTML = html;
        });
    }
    function safeParseJSON(str){ try { return JSON.parse(str); } catch { return null; } }
    function escapeHtml(text){ const div=document.createElement('div'); div.textContent=text||''; return div.innerHTML; }
    document.addEventListener('DOMContentLoaded', initTimelines);
    </script>
</div>


